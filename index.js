const _0xcb9938=_0x5c73;function _0x5c73(_0x4f34f8,_0x5dad74){_0x4f34f8=_0x4f34f8-0x105;const _0x37ee15=_0x37ee();let _0x5c7310=_0x37ee15[_0x4f34f8];return _0x5c7310;}(function(_0x278948,_0x34b6f1){const _0x4bacb6=_0x5c73,_0x49d6da=_0x278948();while(!![]){try{const _0x33ff12=-parseInt(_0x4bacb6(0x173))/0x1*(-parseInt(_0x4bacb6(0x1a2))/0x2)+-parseInt(_0x4bacb6(0x109))/0x3*(-parseInt(_0x4bacb6(0x1b3))/0x4)+parseInt(_0x4bacb6(0x1ad))/0x5+parseInt(_0x4bacb6(0x12d))/0x6*(-parseInt(_0x4bacb6(0x16a))/0x7)+-parseInt(_0x4bacb6(0x10e))/0x8+parseInt(_0x4bacb6(0x134))/0x9+-parseInt(_0x4bacb6(0x149))/0xa;if(_0x33ff12===_0x34b6f1)break;else _0x49d6da['push'](_0x49d6da['shift']());}catch(_0x15c5c2){_0x49d6da['push'](_0x49d6da['shift']());}}}(_0x37ee,0x6d443),eou);const express=require(_0xcb9938(0x18e)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0xcb9938(0x1b6)),{promisify}=require('util'),exec=promisify(require(_0xcb9938(0x132))[_0xcb9938(0x175)]),{execSync}=require('child_process'),UPLOAD_URL=process['env'][_0xcb9938(0x12a)]||'',PROJECT_URL=process[_0xcb9938(0x128)][_0xcb9938(0x19d)]||'',AUTO_ACCESS=process[_0xcb9938(0x128)][_0xcb9938(0x192)]||![],FILE_PATH=process[_0xcb9938(0x128)][_0xcb9938(0x165)]||'/tmp',SUB_PATH=process['env'][_0xcb9938(0x198)]||_0xcb9938(0x1ba),PORT=process[_0xcb9938(0x128)][_0xcb9938(0x1a6)]||process[_0xcb9938(0x128)]['PORT']||0xbb8,UUID=process[_0xcb9938(0x128)][_0xcb9938(0x136)]||_0xcb9938(0x191),NEZHA_SERVER=process['env'][_0xcb9938(0x19c)]||'',NEZHA_PORT=process[_0xcb9938(0x128)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0xcb9938(0x11b)]||'',ARGO_DOMAIN=process['env'][_0xcb9938(0x190)]||_0xcb9938(0x13c),ARGO_AUTH=process[_0xcb9938(0x128)][_0xcb9938(0x153)]||_0xcb9938(0x131),ARGO_PORT=process[_0xcb9938(0x128)][_0xcb9938(0x197)]||0x1f41,CFIP=process[_0xcb9938(0x128)][_0xcb9938(0x11f)]||_0xcb9938(0x12e),CFPORT=process['env'][_0xcb9938(0x1a7)]||0x1bb,NAME=process[_0xcb9938(0x128)][_0xcb9938(0x143)]||'';!fs[_0xcb9938(0x17d)](FILE_PATH)?(fs[_0xcb9938(0x14d)](FILE_PATH),console['log'](FILE_PATH+_0xcb9938(0x18a))):console[_0xcb9938(0x162)](FILE_PATH+_0xcb9938(0x184));function generateRandomName(){const _0x27c857=_0xcb9938,_0x51bcfe='abcdefghijklmnopqrstuvwxyz';let _0x5b5db1='';for(let _0x4a318b=0x0;_0x4a318b<0x6;_0x4a318b++){_0x5b5db1+=_0x51bcfe[_0x27c857(0x14f)](Math[_0x27c857(0x142)](Math[_0x27c857(0x151)]()*_0x51bcfe['length']));}return _0x5b5db1;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0xcb9938(0x1bc)](FILE_PATH,npmName),phpPath=path[_0xcb9938(0x1bc)](FILE_PATH,phpName),webPath=path[_0xcb9938(0x1bc)](FILE_PATH,webName),botPath=path[_0xcb9938(0x1bc)](FILE_PATH,botName),subPath=path[_0xcb9938(0x1bc)](FILE_PATH,_0xcb9938(0x199)),listPath=path[_0xcb9938(0x1bc)](FILE_PATH,'list.txt'),bootLogPath=path[_0xcb9938(0x1bc)](FILE_PATH,_0xcb9938(0x121)),configPath=path[_0xcb9938(0x1bc)](FILE_PATH,'config.json');function deleteNodes(){const _0x3fbc17=_0xcb9938;try{if(!UPLOAD_URL)return;if(!fs[_0x3fbc17(0x17d)](subPath))return;let _0x477a80;try{_0x477a80=fs['readFileSync'](subPath,_0x3fbc17(0x10d));}catch{return null;}const _0x559818=Buffer[_0x3fbc17(0x1b8)](_0x477a80,_0x3fbc17(0x19b))[_0x3fbc17(0x16c)](_0x3fbc17(0x10d)),_0x34a971=_0x559818[_0x3fbc17(0x161)]('\x0a')[_0x3fbc17(0x112)](_0xc7139d=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3fbc17(0x118)](_0xc7139d));if(_0x34a971[_0x3fbc17(0x172)]===0x0)return;return axios[_0x3fbc17(0x17e)](UPLOAD_URL+_0x3fbc17(0x1bd),JSON[_0x3fbc17(0x183)]({'nodes':_0x34a971}),{'headers':{'Content-Type':'application/json'}})[_0x3fbc17(0x18f)](_0x608f9a=>{return null;}),null;}catch(_0x2ee229){return null;}}function _0x37ee(){const _0xd6ef43=['tunnel.json','.exe\x20>\x20nul\x202>&1','8443','fileName','Add\x20automatic\x20access\x20task\x20faild:\x20','split','log','\x20>/dev/null\x202>&1\x20&','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','FILE_PATH','data','pipe','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','\x22\x20>\x20/dev/null\x202>&1','91021kfXQrk','/dev/null','toString','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','https://amd64.ssss.nyc.mn/v1','nohup\x20','/trojan-argo','trim','length','124213OlGsDK','config.json','exec','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','tls','readFileSync','none','443','\x0aclient_secret:\x20','has','existsSync','post','https://arm64.ssss.nyc.mn/web','Skipping\x20adding\x20automatic\x20access\x20task','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','get','stringify','\x20already\x20exists','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','trojan','config.yaml','then','win32','\x20is\x20created','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','Error\x20executing\x20command:\x20','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','express','catch','ARGO_DOMAIN','bc97f674-c578-4940-9234-0a1da46041b9','AUTO_ACCESS','https+local://8.8.8.8/dns-query','quic','stream','--tls','ARGO_PORT','SUB_PATH','sub.txt','platform','base64','NEZHA_SERVER','PROJECT_URL','all','/api/add-subscriptions','pop','/vless-argo','2XjLfyK','chmod','tcp','Error\x20in\x20startserver:','SERVER_PORT','CFPORT','true','\x20successfully','arch','Content-Type','basename','3774395RlJTnM','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','writeFileSync','\x20failed:\x20','blackhole','aarch64','4hUGjdk','xtls-rprx-vision','\x20>\x20nul\x202>&1','path','block','from','includes','subabc','error','join','/api/delete-nodes','\x20-p\x20','clear','fileUrl','\x20-c\x20\x22','\x20-c\x20','rm\x20-rf\x20','Nodes\x20uploaded\x20successfully','1093353RmtXkd','vless','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Error\x20reading\x20boot.log:','utf-8','2397368oQcKgD','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','send','2083','filter','&path=%2Ftrojan-argo%3Fed%3D2560#','false','unlinkSync','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','/sub.txt\x20saved\x20successfully','test','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','message','NEZHA_KEY','\x0a\x20\x20tunnel:\x20','/vmess-argo','&fp=firefox&type=ws&host=','CFIP','freedom','boot.log','status','map','2087','npm\x20running\x20error:\x20','push','\x20is\x20running','env','response','UPLOAD_URL','application/json','text/plain;\x20charset=utf-8','270IiHvBK','saas.sin.fan','forEach','ARGO_DOMAIN:','eyJhIjoiODMzODQxZDFjYzE3MzEyYjZmZDkwNjBiZjdjNDY5MmMiLCJ0IjoiYzYyN2I5OWItODg1Yy00OWJjLTg5YmItNThhYjRiNDA1MzUwIiwicyI6IlptWTNZemhpTVdNdE16TTFOUzAwTVRRM0xUa3lNekl0WXprNU5HSTRaREF6TkdKbCJ9','child_process','isFile','4447971YpEChh','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','UUID','tunnel.yml','/config.json\x20>/dev/null\x202>&1\x20&','arm','App\x20is\x20running','https://amd64.ssss.nyc.mn/agent','renderus.dunkirk.de5.net','firefox','?security=tls&sni=','Empowerment\x20success\x20for\x20','statSync','taskkill\x20/f\x20/im\x20','floor','NAME','\x0a\x20\x20\x0avmess://','createWriteStream','127.0.0.1','Error\x20downloading\x20files:','ArgoDomain:','4054010gcgqmP','2096','unshift','arm64','mkdirSync','2053','charAt','http','random','automatic\x20access\x20task\x20added\x20successfully','ARGO_AUTH','finish','substring','\x20>/dev/null\x202>&1','match','del\x20/f\x20/q\x20','Download\x20','https://arm64.ssss.nyc.mn/v1','direct'];_0x37ee=function(){return _0xd6ef43;};return _0x37ee();}function cleanupOldFiles(){const _0x1d171e=_0xcb9938;try{const _0x26dc96=fs['readdirSync'](FILE_PATH);_0x26dc96[_0x1d171e(0x12f)](_0x52642c=>{const _0x1b42e7=_0x1d171e,_0x54be9e=path['join'](FILE_PATH,_0x52642c);try{const _0x274577=fs[_0x1b42e7(0x140)](_0x54be9e);_0x274577[_0x1b42e7(0x133)]()&&fs[_0x1b42e7(0x115)](_0x54be9e);}catch(_0x5d2ea1){}});}catch(_0x4665c1){}}app[_0xcb9938(0x182)]('/',function(_0xfd0f8e,_0xa71080){_0xa71080['send']('Hello\x20world!');});async function generateConfig(){const _0x39649b=_0xcb9938,_0x41a97={'log':{'access':'/dev/null','error':_0x39649b(0x16b),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x39649b(0x10a),'settings':{'clients':[{'id':UUID,'flow':_0x39649b(0x1b4)}],'decryption':_0x39649b(0x179),'fallbacks':[{'dest':0xbb9},{'path':_0x39649b(0x1a1),'dest':0xbba},{'path':_0x39649b(0x11d),'dest':0xbbb},{'path':_0x39649b(0x170),'dest':0xbbc}]},'streamSettings':{'network':_0x39649b(0x1a4)}},{'port':0xbb9,'listen':_0x39649b(0x146),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x39649b(0x179)},'streamSettings':{'network':'tcp','security':'none'}},{'port':0xbba,'listen':_0x39649b(0x146),'protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x39649b(0x179)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x39649b(0x1a1)}},'sniffing':{'enabled':!![],'destOverride':[_0x39649b(0x150),'tls',_0x39649b(0x194)],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x39649b(0x11d)}},'sniffing':{'enabled':!![],'destOverride':[_0x39649b(0x150),_0x39649b(0x177),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x39649b(0x146),'protocol':_0x39649b(0x186),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x39649b(0x179),'wsSettings':{'path':_0x39649b(0x170)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x39649b(0x177),_0x39649b(0x194)],'metadataOnly':![]}}],'dns':{'servers':[_0x39649b(0x193)]},'outbounds':[{'protocol':_0x39649b(0x120),'tag':_0x39649b(0x15b)},{'protocol':_0x39649b(0x1b1),'tag':_0x39649b(0x1b7)}]};fs[_0x39649b(0x1af)](path[_0x39649b(0x1bc)](FILE_PATH,_0x39649b(0x174)),JSON[_0x39649b(0x183)](_0x41a97,null,0x2));}function getSystemArchitecture(){const _0x1fa401=_0xcb9938,_0xeb0448=os[_0x1fa401(0x1aa)]();return _0xeb0448==='arm'||_0xeb0448===_0x1fa401(0x14c)||_0xeb0448===_0x1fa401(0x1b2)?_0x1fa401(0x139):'amd';}function downloadFile(_0x3ea79f,_0x2071c7,_0x5d22f2){const _0x46c4ef=_0xcb9938,_0x1f4084=_0x3ea79f;!fs[_0x46c4ef(0x17d)](FILE_PATH)&&fs[_0x46c4ef(0x14d)](FILE_PATH,{'recursive':!![]});const _0x42385f=fs[_0x46c4ef(0x145)](_0x1f4084);axios({'method':'get','url':_0x2071c7,'responseType':_0x46c4ef(0x195)})[_0x46c4ef(0x188)](_0x331f25=>{const _0x95a5e1=_0x46c4ef;_0x331f25[_0x95a5e1(0x166)][_0x95a5e1(0x167)](_0x42385f),_0x42385f['on'](_0x95a5e1(0x154),()=>{const _0x137e05=_0x95a5e1;_0x42385f['close'](),console['log'](_0x137e05(0x159)+path[_0x137e05(0x1ac)](_0x1f4084)+_0x137e05(0x1a9)),_0x5d22f2(null,_0x1f4084);}),_0x42385f['on']('error',_0xbcc825=>{const _0x2111c9=_0x95a5e1;fs['unlink'](_0x1f4084,()=>{});const _0x2ebdb4=_0x2111c9(0x159)+path[_0x2111c9(0x1ac)](_0x1f4084)+_0x2111c9(0x1b0)+_0xbcc825[_0x2111c9(0x11a)];console[_0x2111c9(0x1bb)](_0x2ebdb4),_0x5d22f2(_0x2ebdb4);});})['catch'](_0x558843=>{const _0x19a78d=_0x46c4ef,_0x4aabdf=_0x19a78d(0x159)+path[_0x19a78d(0x1ac)](_0x1f4084)+_0x19a78d(0x1b0)+_0x558843[_0x19a78d(0x11a)];console[_0x19a78d(0x1bb)](_0x4aabdf),_0x5d22f2(_0x4aabdf);});}async function downloadFilesAndRun(){const _0x41eb9d=_0xcb9938,_0x3f3784=getSystemArchitecture(),_0x10408d=getFilesForArchitecture(_0x3f3784);if(_0x10408d[_0x41eb9d(0x172)]===0x0){console['log'](_0x41eb9d(0x116));return;}const _0x19053d=_0x10408d[_0x41eb9d(0x123)](_0x86a074=>{return new Promise((_0x18d152,_0x2c02d7)=>{const _0x397784=_0x5c73;downloadFile(_0x86a074[_0x397784(0x15f)],_0x86a074[_0x397784(0x1c0)],(_0x4cbaa0,_0x939d0a)=>{_0x4cbaa0?_0x2c02d7(_0x4cbaa0):_0x18d152(_0x939d0a);});});});try{await Promise[_0x41eb9d(0x19e)](_0x19053d);}catch(_0x8e57a0){console['error'](_0x41eb9d(0x147),_0x8e57a0);return;}function _0x2ba11b(_0x36c7ca){const _0x2636d5=_0x41eb9d,_0x4db6a8=0x1fd;_0x36c7ca[_0x2636d5(0x12f)](_0x29959a=>{const _0x3bde9c=_0x2636d5;fs[_0x3bde9c(0x17d)](_0x29959a)&&fs[_0x3bde9c(0x1a3)](_0x29959a,_0x4db6a8,_0xc9e012=>{const _0x4dafba=_0x3bde9c;_0xc9e012?console['error']('Empowerment\x20failed\x20for\x20'+_0x29959a+':\x20'+_0xc9e012):console['log'](_0x4dafba(0x13f)+_0x29959a+':\x20'+_0x4db6a8[_0x4dafba(0x16c)](0x8));});});}const _0x1094af=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x2ba11b(_0x1094af);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x30de3a=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')[_0x41eb9d(0x1a0)]():'',_0x585803=new Set([_0x41eb9d(0x17a),'8443',_0x41eb9d(0x14a),_0x41eb9d(0x124),'2083',_0x41eb9d(0x14e)]),_0xf0d77b=_0x585803[_0x41eb9d(0x17c)](_0x30de3a)?_0x41eb9d(0x1a8):_0x41eb9d(0x114),_0x335283=_0x41eb9d(0x17b)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x41eb9d(0x10b)+_0xf0d77b+_0x41eb9d(0x1ae)+UUID;fs['writeFileSync'](path[_0x41eb9d(0x1bc)](FILE_PATH,_0x41eb9d(0x187)),_0x335283);const _0x3d807b='nohup\x20'+phpPath+_0x41eb9d(0x105)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x3d807b),console[_0x41eb9d(0x162)](phpName+_0x41eb9d(0x127)),await new Promise(_0x151f95=>setTimeout(_0x151f95,0x3e8));}catch(_0x482bb0){console[_0x41eb9d(0x1bb)]('php\x20running\x20error:\x20'+_0x482bb0);}}else{let _0xe3e8c1='';const _0x45507c=['443',_0x41eb9d(0x15e),_0x41eb9d(0x14a),'2087',_0x41eb9d(0x111),_0x41eb9d(0x14e)];_0x45507c[_0x41eb9d(0x1b9)](NEZHA_PORT)&&(_0xe3e8c1=_0x41eb9d(0x196));const _0x55ee38='nohup\x20'+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x41eb9d(0x1be)+NEZHA_KEY+'\x20'+_0xe3e8c1+_0x41eb9d(0x135);try{await exec(_0x55ee38),console[_0x41eb9d(0x162)](npmName+'\x20is\x20running'),await new Promise(_0x28e5a4=>setTimeout(_0x28e5a4,0x3e8));}catch(_0x2ff2ca){console[_0x41eb9d(0x1bb)](_0x41eb9d(0x125)+_0x2ff2ca);}}}else console[_0x41eb9d(0x162)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x4e0430=_0x41eb9d(0x16f)+webPath+_0x41eb9d(0x106)+FILE_PATH+_0x41eb9d(0x138);try{await exec(_0x4e0430),console[_0x41eb9d(0x162)](webName+'\x20is\x20running'),await new Promise(_0x24c2dd=>setTimeout(_0x24c2dd,0x3e8));}catch(_0x50eecf){console[_0x41eb9d(0x1bb)]('web\x20running\x20error:\x20'+_0x50eecf);}if(fs[_0x41eb9d(0x17d)](botPath)){let _0x3ea0f6;if(ARGO_AUTH[_0x41eb9d(0x157)](/^[A-Z0-9a-z=]{120,250}$/))_0x3ea0f6=_0x41eb9d(0x176)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x3ea0f6='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+'/tunnel.yml\x20run':_0x3ea0f6='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x41eb9d(0x16f)+botPath+'\x20'+_0x3ea0f6+_0x41eb9d(0x163)),console['log'](botName+_0x41eb9d(0x127)),await new Promise(_0x4c7c96=>setTimeout(_0x4c7c96,0x7d0));}catch(_0x35716e){console[_0x41eb9d(0x1bb)](_0x41eb9d(0x18c)+_0x35716e);}}await new Promise(_0x11ced7=>setTimeout(_0x11ced7,0x1388));}function getFilesForArchitecture(_0x220a1d){const _0x5275a3=_0xcb9938;let _0x33704a;_0x220a1d===_0x5275a3(0x139)?_0x33704a=[{'fileName':webPath,'fileUrl':_0x5275a3(0x17f)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x33704a=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x678cd=_0x220a1d===_0x5275a3(0x139)?'https://arm64.ssss.nyc.mn/agent':_0x5275a3(0x13b);_0x33704a[_0x5275a3(0x14b)]({'fileName':npmPath,'fileUrl':_0x678cd});}else{const _0x4df5a0=_0x220a1d===_0x5275a3(0x139)?_0x5275a3(0x15a):_0x5275a3(0x16e);_0x33704a[_0x5275a3(0x14b)]({'fileName':phpPath,'fileUrl':_0x4df5a0});}}return _0x33704a;}function argoType(){const _0x45df73=_0xcb9938;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x45df73(0x168));return;}if(ARGO_AUTH[_0x45df73(0x1b9)]('TunnelSecret')){fs['writeFileSync'](path['join'](FILE_PATH,_0x45df73(0x15c)),ARGO_AUTH);const _0x5c75d3=_0x45df73(0x11c)+ARGO_AUTH['split']('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x45df73(0x1bc)](FILE_PATH,_0x45df73(0x15c))+_0x45df73(0x18d)+ARGO_DOMAIN+_0x45df73(0x18b)+ARGO_PORT+_0x45df73(0x16d);fs[_0x45df73(0x1af)](path['join'](FILE_PATH,_0x45df73(0x137)),_0x5c75d3);}else console[_0x45df73(0x162)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}argoType();async function extractDomains(){const _0x4d7401=_0xcb9938;let _0x1b8b2f;if(ARGO_AUTH&&ARGO_DOMAIN)_0x1b8b2f=ARGO_DOMAIN,console[_0x4d7401(0x162)](_0x4d7401(0x130),_0x1b8b2f),await _0x561350(_0x1b8b2f);else try{const _0x5ae4d7=fs[_0x4d7401(0x178)](path['join'](FILE_PATH,'boot.log'),_0x4d7401(0x10d)),_0x5d8b7a=_0x5ae4d7[_0x4d7401(0x161)]('\x0a'),_0x4ba729=[];_0x5d8b7a[_0x4d7401(0x12f)](_0x16275e=>{const _0x549673=_0x4d7401,_0x4e60ea=_0x16275e[_0x549673(0x157)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x4e60ea){const _0x4570a1=_0x4e60ea[0x1];_0x4ba729[_0x549673(0x126)](_0x4570a1);}});if(_0x4ba729[_0x4d7401(0x172)]>0x0)_0x1b8b2f=_0x4ba729[0x0],console[_0x4d7401(0x162)](_0x4d7401(0x148),_0x1b8b2f),await _0x561350(_0x1b8b2f);else{console[_0x4d7401(0x162)](_0x4d7401(0x181)),fs[_0x4d7401(0x115)](path[_0x4d7401(0x1bc)](FILE_PATH,_0x4d7401(0x121)));async function _0x15ad08(){const _0x1a18e9=_0x4d7401;try{process[_0x1a18e9(0x19a)]===_0x1a18e9(0x189)?await exec(_0x1a18e9(0x141)+botName+_0x1a18e9(0x15d)):await exec('pkill\x20-f\x20\x22['+botName[_0x1a18e9(0x14f)](0x0)+']'+botName[_0x1a18e9(0x155)](0x1)+_0x1a18e9(0x169));}catch(_0x375b70){}}_0x15ad08(),await new Promise(_0x11a110=>setTimeout(_0x11a110,0xbb8));const _0x3e37b1=_0x4d7401(0x10f)+FILE_PATH+_0x4d7401(0x164)+ARGO_PORT;try{await exec(_0x4d7401(0x16f)+botPath+'\x20'+_0x3e37b1+_0x4d7401(0x163)),console[_0x4d7401(0x162)](botName+_0x4d7401(0x127)),await new Promise(_0x30f4bd=>setTimeout(_0x30f4bd,0xbb8)),await extractDomains();}catch(_0xabcee8){console[_0x4d7401(0x1bb)](_0x4d7401(0x18c)+_0xabcee8);}}}catch(_0x2a57f3){console[_0x4d7401(0x1bb)](_0x4d7401(0x10c),_0x2a57f3);}async function _0x561350(_0x142d6e){const _0x815e42=_0x4d7401,_0x4cfc86=execSync(_0x815e42(0x185),{'encoding':'utf-8'}),_0x25f283=_0x4cfc86[_0x815e42(0x171)](),_0x5034c1=NAME?NAME+'-'+_0x25f283:_0x25f283;return new Promise(_0x16186f=>{setTimeout(()=>{const _0x4e40e0=_0x5c73,_0x39c11e={'v':'2','ps':''+_0x5034c1,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x4e40e0(0x179),'net':'ws','type':'none','host':_0x142d6e,'path':'/vmess-argo?ed=2560','tls':_0x4e40e0(0x177),'sni':_0x142d6e,'alpn':'','fp':_0x4e40e0(0x13d)},_0x4534fe='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x142d6e+'&fp=firefox&type=ws&host='+_0x142d6e+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x5034c1+_0x4e40e0(0x144)+Buffer[_0x4e40e0(0x1b8)](JSON[_0x4e40e0(0x183)](_0x39c11e))['toString']('base64')+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x4e40e0(0x13e)+_0x142d6e+_0x4e40e0(0x11e)+_0x142d6e+_0x4e40e0(0x113)+_0x5034c1+'\x0a\x20\x20\x20\x20';console[_0x4e40e0(0x162)](Buffer[_0x4e40e0(0x1b8)](_0x4534fe)['toString']('base64')),fs[_0x4e40e0(0x1af)](subPath,Buffer[_0x4e40e0(0x1b8)](_0x4534fe)[_0x4e40e0(0x16c)]('base64')),console[_0x4e40e0(0x162)](FILE_PATH+_0x4e40e0(0x117)),uploadNodes(),app[_0x4e40e0(0x182)]('/'+SUB_PATH,(_0x4dae86,_0x1bba09)=>{const _0x18f556=_0x4e40e0,_0x42591c=Buffer[_0x18f556(0x1b8)](_0x4534fe)[_0x18f556(0x16c)](_0x18f556(0x19b));_0x1bba09['set'](_0x18f556(0x1ab),_0x18f556(0x12c)),_0x1bba09[_0x18f556(0x110)](_0x42591c);}),_0x16186f(_0x4534fe);},0x7d0);});}}async function uploadNodes(){const _0xdee43=_0xcb9938;if(UPLOAD_URL&&PROJECT_URL){const _0x1e7400=PROJECT_URL+'/'+SUB_PATH,_0x224b90={'subscription':[_0x1e7400]};try{const _0x27c5a1=await axios[_0xdee43(0x17e)](UPLOAD_URL+_0xdee43(0x19f),_0x224b90,{'headers':{'Content-Type':_0xdee43(0x12b)}});return _0x27c5a1&&_0x27c5a1[_0xdee43(0x122)]===0xc8?(console[_0xdee43(0x162)]('Subscription\x20uploaded\x20successfully'),_0x27c5a1):null;}catch(_0x4615f3){if(_0x4615f3['response']){if(_0x4615f3[_0xdee43(0x129)][_0xdee43(0x122)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0xdee43(0x17d)](listPath))return;const _0x284d56=fs[_0xdee43(0x178)](listPath,'utf-8'),_0x29d15f=_0x284d56['split']('\x0a')[_0xdee43(0x112)](_0x26d3e2=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0xdee43(0x118)](_0x26d3e2));if(_0x29d15f[_0xdee43(0x172)]===0x0)return;const _0x2660a1=JSON[_0xdee43(0x183)]({'nodes':_0x29d15f});try{const _0x1eaf97=await axios[_0xdee43(0x17e)](UPLOAD_URL+'/api/add-nodes',_0x2660a1,{'headers':{'Content-Type':_0xdee43(0x12b)}});return _0x1eaf97&&_0x1eaf97['status']===0xc8?(console['log'](_0xdee43(0x108)),_0x1eaf97):null;}catch(_0x585257){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x57db64=_0x5c73,_0x1dcb77=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x1dcb77[_0x57db64(0x126)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x1dcb77['push'](phpPath);process[_0x57db64(0x19a)]==='win32'?exec(_0x57db64(0x158)+_0x1dcb77['join']('\x20')+_0x57db64(0x1b5),_0x57d8ab=>{const _0x3a6c97=_0x57db64;console[_0x3a6c97(0x1bf)](),console['log'](_0x3a6c97(0x13a)),console['log'](_0x3a6c97(0x119));}):exec(_0x57db64(0x107)+_0x1dcb77[_0x57db64(0x1bc)]('\x20')+_0x57db64(0x156),_0x1fc420=>{const _0xf9826d=_0x57db64;console[_0xf9826d(0x1bf)](),console[_0xf9826d(0x162)](_0xf9826d(0x13a)),console[_0xf9826d(0x162)](_0xf9826d(0x119));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x112211=_0xcb9938;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x112211(0x162)](_0x112211(0x180));return;}try{const _0x1e88df=await axios[_0x112211(0x17e)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console['log'](_0x112211(0x152)),_0x1e88df;}catch(_0x82170c){return console[_0x112211(0x1bb)](_0x112211(0x160)+_0x82170c[_0x112211(0x11a)]),null;}}async function startserver(){const _0x243f32=_0xcb9938;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x2c3b7e){console[_0x243f32(0x1bb)](_0x243f32(0x1a5),_0x2c3b7e);}}startserver()[_0xcb9938(0x18f)](_0x1b3537=>{const _0x45923b=_0xcb9938;console[_0x45923b(0x1bb)]('Unhandled\x20error\x20in\x20startserver:',_0x1b3537);}),app['listen'](PORT,()=>console[_0xcb9938(0x162)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
